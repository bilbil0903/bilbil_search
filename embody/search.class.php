<?php/** 搜索类 */class search{   var $db;   var $total;   var $wd;   var $stime;   var $wd_count;   var $totalpage;   var $config;   function q($wd){      global $db;	  $this->db=$db;       $sql="SELECT title,id,url,type from ambar where MATCH(title) AGAINST ('$wd' in boolean mode)";	   $query=mysql_query($sql);	   $this->total=$total=mysql_num_rows($query);	   $pagesize=10;       $p=1;	   $this->totalpage=$totalpage=ceil($total/$pagesize);       if(strpos($_SERVER['QUERY_STRING'],"p=")){	   $p=intval($_GET["p"]);	   }	   if($p<=0){$p=1;}	   $offset=($p-1)*$pagesize;	   $query=mysql_query($sql." limit $offset,$pagesize");	    while($row=mysql_fetch_array($query))         {			$data["title"]= $this->GetRedKeyWord($row["title"],$wd);			  $data["url"]=$row["url"];			  $data["pagesize"]=$row["id"];              $data["type"]=$row["type"];			  $data["link_id"]=$row["id"];			  $data["tuiguang"]=$row["id"];			  $array[] = $data;		 }		 $array_count=count($array);		 return $array;   }      	function GetRedKeyWord($fstr,$wd)	{	     $ks =split(' ',$wd);		//var_dump($ks);		//$ks[count($ks)]=$wd;		$kwsql = '';		foreach($ks as $k)		{						$fstr = str_replace($k,"<font color='#c00'>$k</font>",$fstr);		}		return $fstr;	}		}?>